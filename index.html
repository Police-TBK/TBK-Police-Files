<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TBK-Police Files</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="tbk.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <img src="tbk.png" alt="TBK" class="logo" />
    <h1 id="app-title">TBK-Police Files</h1>
    <div class="controls">
      <select id="lang-switch" aria-label="language">
        <option value="en">English</option>
        <option value="km">ááŸ’á˜áŸ‚áš</option>
      </select>
      <button id="theme-toggle">ğŸŒ™</button>
    </div>
  </header>

  <main id="app">
    <section id="auth-section">
      <div id="signed-out">
        <h2 id="auth-title">Login</h2>
        <input id="email" placeholder="Email" />
        <input id="password" placeholder="Password" type="password" />
        <button id="login-btn">Login</button>
        <button id="signup-btn">Sign Up</button>
      </div>
      <div id="signed-in" style="display:none;">
        <div id="user-info">
          <span id="welcome"></span>
          <button id="logout-btn">Logout</button>
        </div>
      </div>
    </section>

    <nav id="main-nav" style="display:none;">
      <button data-view="submit">1. áŠá¶á€áŸ‹áŸáŸ’á“á¾áŸá»áŸ† / Submit</button>
      <button data-view="track">2. áá¶á˜áŠá¶á“ / Track</button>
      <button data-view="aggregate">3. á‘á¶á‰á™á€á‘á·á“áŸ’á“á“áŸá™ / Aggregate</button>
      <button data-view="contact">4. á‘áŸ†á“á¶á€áŸ‹á‘áŸ†á“á„ / Contact</button>
      <button data-view="admin" id="admin-btn" style="display:none;">Admin</button>
    </nav>

    <section id="view-area">
      <div id="view-submit" class="view" style="display:none;">
        <h3>Submit Document / áŠá¶á€áŸ‹á¯á€áŸá¶áš</h3>
        <input id="title" placeholder="Title (á…áŸ†áá„á‡á¾á„)" />
        <textarea id="desc" placeholder="Description (á–ááŸŒá“á¶)"></textarea>
        <input id="file-input" type="file" />
        <button id="upload-btn">Upload</button>
        <div id="upload-status"></div>
      </div>

      <div id="view-track" class="view" style="display:none;">
        <h3>Your Submissions</h3>
        <div id="my-submissions"></div>
      </div>

      <div id="view-aggregate" class="view" style="display:none;">
        <h3>Download Aggregated Data</h3>
        <button id="download-csv">Download CSV of metadata</button>
        <div id="agg-list"></div>
      </div>

      <div id="view-contact" class="view" style="display:none;">
        <h3>Contact</h3>
        <p>Click to show phone / telegram</p>
        <button id="show-contact">Show Phone & Telegram</button>
        <div id="contact-details" style="display:none;">
          <p>Phone: <a href="tel:+85512345678">+855 12 345 678</a></p>
          <p>Telegram: <a target="_blank" id="telegram-link" href="https://t.me/domunlocked">Open Telegram</a></p>
        </div>
      </div>

      <div id="view-admin" class="view" style="display:none;">
        <h3>Admin Dashboard</h3>
        <div>
          <label>Filter by status:
            <select id="filter-status">
              <option value="all">All</option>
              <option value="pending">Pending</option>
              <option value="done">Done</option>
            </select>
          </label>
          <label>Sort by:
            <select id="sort-by">
              <option value="date_desc">Date desc</option>
              <option value="date_asc">Date asc</option>
              <option value="title">Title</option>
              <option value="user">Username</option>
            </select>
          </label>
        </div>
        <div id="admin-list"></div>
      </div>
    </section>
  </main>

  <!-- Firebase compat SDKs (simple for GitHub Pages usage) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

  <script>
    // Firebase config (provided)
    const firebaseConfig = {apiKey: "AIzaSyD3kI3RlOIeGd4r5evCwjpzDe-47utaWco", authDomain: "pl-tbk-file.firebaseapp.com", projectId: "pl-tbk-file", storageBucket: "pl-tbk-file.firebasestorage.app", messagingSenderId: "392294785491", appId: "1:392294785491:web:479dddf03d5ded40bf4f26"};
  </script>
  <script>
    // initialize (compat)
    firebase.initializeApp({apiKey: "AIzaSyD3kI3RlOIeGd4r5evCwjpzDe-47utaWco", authDomain: "pl-tbk-file.firebaseapp.com", projectId: "pl-tbk-file", storageBucket: "pl-tbk-file.firebasestorage.app", messagingSenderId: "392294785491", appId: "1:392294785491:web:479dddf03d5ded40bf4f26"});
  </script>

  <script src="app.js"></script>
</body>
</html>
